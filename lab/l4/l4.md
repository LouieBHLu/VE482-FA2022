<div style="width:60%;height:200px;text-align:center;border:14px solid #808080;border-top:none;border-left:none;border-bottom:none;display:inline-block">
    <div style="border:4px solid #808080;border-radius:8px;width:95%;height:100%;background-color: rgb(209, 209, 209);">
        <div style="width:100%;height:30%;text-align:center;line-height:60px;font-size:26px;font-family:'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;">VE482 Lab Report</div>
        <div style="width:100%;height:18%;text-align:center;line-height:26px;font-size:20px;font-familny:'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;"><b>Lab 4</b> - Fall 2021</div>
        <div style="width:100%;height:57%;text-align:center;font-size:16px;line-height:22px;font-family: 'Courier New', Courier, monospace;font-weight:300;"><br><b>Name: Mingxuan Lu<br>ID: 518021911166<br>Email: mingxuan.lu@sjtu.edu.cn<br></b></div>
    </div>
</div>
<div style="width:35%;height:200px;display:inline-block;float:right">
    <div style="width:100%;height:25%;text-align:center;line-height:55px;font-size:20px;font-family:'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;"><b>Table of Contents</b></div>
    <div style="width:100%;height:75%;text-align:left;margin-left:2px;line-height:30px;font-size:13px;font-family:Verdana, Geneva, Tahoma, sans-serif;font-weight:300;"></div>
</div>
## Database

### Database system installation

- What are the most common database systems?

  MySQL, Redis, Hive
- Briefly list the pros and cons of the three most common ones.
  
  - MySQL
    - Pros: high performance for large databases, open source
    - Cons: incremental backups are uneasy to implement, no support for XML or OLAP
  - Oracle
    - Pros: Uses SQL language; Great performance to deal with lots of data; Good and vast documentation and community
    - Cons: Compared to the most modern databases, it is hard to learn; Expensive licenses
  - Redis
    - Pros: high speed, easy configuration, multiple data types supported
    - Cons: requires more memory, no support for join queries

- Create an empty SQLite database

```sqlite
sqlite3 l4.db
```

- Use the SQLite shell to prepare two empty tables for each of your .csv file.

```sqlite
CREATE TABLE db
(
  hash TEXT NOT NULL,
  name TEXT NOT NULL,
  subject TEXT
);
CREATE TABLE time_stamp
(
  hash TEXT NOT NULL,
  name TEXT NOT NULL,
  dates TEXT,
  tstamp INT
);
```

- Import each .csv file in its corresponding SQLite table.

```sqlite
.separator "|"
.import db.psv db
.import timestamp.psv time_stamp
```

### Database queries

- Who are the top five contributors to the Linux kernel since the beginning?

```sqlite
select name, count(*) from time_stamp group by name order by count(*) desc limit 5;
```

We can get the result:

```
Linus Torvalds|30702
David S. Miller|13180
Takashi Iwai|7726
Mark Brown|7670
Arnd Bergmann|7520
```



- Who are the top five contributors to the Linux kernel for each year over the past five years?

TODO

```sqlite
select name, count(*) from time_stamp where tstamp >= 1577836800 and tstamp < 1609459200 group by name order by count(*) desc limit 5;
```

We can get the result:

```
Linus Torvalds|1886
David S. Miller|924
Christoph Hellwig|806
Mauro Carvalho Chehab|770
Chris Wilson|644
```



- What is the most common “commit subject”?

```sqlite
select subject, count(*) from db group by subject order by count(*) desc limit 1;
```

We can get the result:

```
Merge git://git.kernel.org/pub/scm/linux/kernel/git/davem/net|670
```



- On which day is the number of commits the highest？

TODO

```sqlite
select date(dates), count(*) from time_stamp group by date(dates) order by count(*) desc limit 1;
```

We can get the result:

```
2008-01-30|1031
```



- Determine the average time between two commits for the five main contributor.

```sqlite
SELECT (MAX(tstamp) - MIN(tstamp)) / (count(*) - 1) FROM time_stamp WHERE name = "Arnd Bergmann";
```

We can get the result:

```
# 487552654 30701
15881 
# 487045012 13179
36956 
# 489001082 7725
63301 
# 459628018 7669
59933 
# 479764856 7519
63807 
```

## Debugging

- **How to enable built-in debugging in gcc？**
  - by specifying `-g` to enable the extra debugging options (using GCC)
- **What is the meaning of GDB?**
  - ~~GDB cannot be eaten.~~ GDB stands for GNU debugger, which executes the program, makes it stop on specified conditions, examine the reason why it stops and changes things for the user to experiment with correcting the effects of existing bugs.

### basic GDB usage

- **Find the homepage of the GDB project.**
  - https://www.gnu.org/software/gdb/
- **What languages are supported by GDB?**[^3]
  - Ada
  - Assembly
  - C
  - C++
  - D
  - Fortran
  - Go
  - Objective-C
  - OpenCL
  - Modula-2
  - Pascal
  - Rust
- **What are the following GDB commands doing:**[^4]
  - `backtrace` summarizes how the program got where it is, starting with the current executing frame.
  - `where` is an additional alias for `backtrace`.
  - `finish` can be used to continue execution of the current function until it returns to its caller.
  - `delete` can be used to delete a specified breakpoint
  - `info breakpoints` can be used to display defined breakpoints.
- **Search the documentation and explain how to use conditional breakpoints.**
  - format: `condition <breakpoint_number> the_condition`, where `the_condition` stands for a user-specified condition, such as `i>5`
- **What is -tui option for GDB?**[^5]
  - enable GDB Text User Interface. It can also be activated with `C-x C-a`. Four text windows are available: command, source code, assembly code, and register.
- **What is the "reverse step" in GDB and how to enable it. Provide the key steps and commands.**
  - reverse step: 
  - firstly, set two breakpoints (2, 3)
  - secondly, set the rule that when breakpoint 3 is hit, rerun the program: `command 3 \ run \ end`
  - set the rule that when breakpoint 2 is hit, start the recording: `command 2 \ record \ continue \ end`
  - `set pagination off`
  - `run` 